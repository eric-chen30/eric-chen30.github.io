<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Work Hard To Be A Better Man">
    <meta name="author" content="Eric Chen">
    
    <title>
        
            Docker入门 |
        
        Keep Theme
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/favicon.ico">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"csstar.top","root":"/","language":"zh-CN"};
    KEEP.theme_config = {"toc":{"enable":false,"number":false,"expand_all":false,"init_open":false},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.jpg","favicon":"/images/favicon.ico","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":false,"preload":false},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":false},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 5.1.1"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                Keep Theme
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                    
                </ul>
            </div>
            <div class="mobile">
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">Docker入门</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Eric Chen</span>
                        
                            <span class="author-label">Lv2</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2020-09-12 15:59:46</span>
        <span class="mobile">2020-09-12 15:59</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/%E5%85%B6%E5%AE%83/">其它</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Docker/">Docker</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="docker入门"><a class="markdownIt-Anchor" href="#docker入门">#</a> Docker 入门</h1>
<h2 id="docker简介"><a class="markdownIt-Anchor" href="#docker简介">#</a> docker 简介</h2>
<h3 id="三要素"><a class="markdownIt-Anchor" href="#三要素">#</a> 三要素：</h3>
<p>仓库，镜像，容器</p>
<h3 id="why"><a class="markdownIt-Anchor" href="#why">#</a> why：</h3>
<p>开发代码 ----&gt; 运维工程师不一定能运行</p>
<p>环境 / 配置不同 -&gt; 导致相同代码不一定能成功运行得到正确结果</p>
<h3 id="简化"><a class="markdownIt-Anchor" href="#简化">#</a> 简化：</h3>
<p>将代码 / 依赖 / 配置 / 环境等一系列进行打包形成一个统一的镜像</p>
<p>这个统一的镜像可以在较为简单的环境下成功运行</p>
<h3 id="比喻"><a class="markdownIt-Anchor" href="#比喻">#</a> 比喻：</h3>
<p>一个集装箱代表一个运行环境，相互分离，互不干扰</p>
<h2 id="虚拟机与docker的概念和区别"><a class="markdownIt-Anchor" href="#虚拟机与docker的概念和区别">#</a> 虚拟机与 docker 的概念和区别</h2>
<h3 id="虚拟机"><a class="markdownIt-Anchor" href="#虚拟机">#</a> 虚拟机：</h3>
<p>在一种操作系统里运行另一种操作系统，跟真实系统一模一样</p>
<h3 id="区别"><a class="markdownIt-Anchor" href="#区别">#</a> 区别：</h3>
<p>虚拟机运行分钟级，而 docker 则是秒级</p>
<p>虚拟里占用资源多，包含了硬件，软件一整套操作系统</p>
<p>docker 轻量级的，且基于宿主机的内核</p>
<p>Linux 容器不是模拟一个完整的操作系统，按需导入</p>
<p>docker 可以认为是一种精简版的 linux 环境，更简洁，灵活</p>
<h2 id="资源"><a class="markdownIt-Anchor" href="#资源">#</a> 资源</h2>
<p><a class="link" target="_blank" rel="noopener" href="http://docker-cn.com">docker-cn.com<i class="fas fa-external-link-alt"></i></a>    //docker 中文网<br>
 Docker Hub        //docker 仓库</p>
<h2 id="docker安装"><a class="markdownIt-Anchor" href="#docker安装">#</a> Docker 安装</h2>
<p>centos 6.5 或更高的版本</p>
<blockquote>
<p>uname -r        cat  /etc/redhat-release    // 查看 centos 版本<br>
 epel-release    //epel 安装 docker 依赖库   tag：6.8<br>
<a class="link" target="_blank" rel="noopener" href="http://docker.io">docker.io<i class="fas fa-external-link-alt"></i></a>         // 正式的 docker 镜像      tag：6.8</p>
</blockquote>
<p>7.0 版本不同，具体参考官方文档</p>
<h2 id="三部分"><a class="markdownIt-Anchor" href="#三部分">#</a> 三部分</h2>
<p>client--------&gt;docker bulid / pull / run<br>
docker_host---------&gt;Docker  daemon<br>
repository-------------&gt; 仓库</p>
<h3 id="理解"><a class="markdownIt-Anchor" href="#理解">#</a> 理解：</h3>
<p>镜像 ------ 是只读模板<br>
容器 ------ 时利用镜像创造的实例，可以看作简易版的 linux<br>
 仓库 ------ 集中存放镜像文件   分为公开库 / 私有库</p>
<h2 id="阿里云网易云镜像加速"><a class="markdownIt-Anchor" href="#阿里云网易云镜像加速">#</a> 阿里云 / 网易云镜像加速：</h2>
<p>注册账号<br>
获得阿里云加速器链接<br>
配置文件<br>
重载配置文件 / 重启 docker<br>
 检查是否生效  ps -ef | grep docker</p>
<h3 id="docker-run-查找顺序"><a class="markdownIt-Anchor" href="#docker-run-查找顺序">#</a> docker run 查找顺序</h3>
<p>本地容器 ------&gt; 本地镜像 --------&gt;hub 共有仓库去 pull 镜像 -----&gt; 本地更具镜像实例一个容器</p>
<h2 id="docker命令"><a class="markdownIt-Anchor" href="#docker命令">#</a> docker 命令</h2>
<blockquote>
<p>systemctl  start  docker     // 启动 docker</p>
</blockquote>
<blockquote>
<p>docker images                  // 本地镜像模板</p>
<p>-a  所有镜像     -q 所有镜像 id     --digests  摘要</p>
<p>–no-trunc 完整镜像信息     // 参数</p>
</blockquote>
<blockquote>
<p>docker search &lt;images_name&gt;   // 在 docker hub 共有仓库中搜寻镜像</p>
<p>-s    星数限定      --no-trunc 完整镜像信息    --automated  只显示该类型镜像</p>
</blockquote>
<blockquote>
<p>docker  pull  &lt;images_name&gt;：tag   // 拉去某个特定版本镜像</p>
</blockquote>
<blockquote>
<p>docker rmi  &lt;images_name&gt;  // 运行时删除不了</p>
<p>-f   强制删除</p>
</blockquote>
<blockquote>
<p>docker rmi -f  images1:tag  images2:tag  // 删除多个镜像</p>
</blockquote>
<blockquote>
<p>docker rmi -f  $(docker images -qa)    // 删除全部镜像</p>
</blockquote>
<h3 id="docker-ps-的参数"><a class="markdownIt-Anchor" href="#docker-ps-的参数">#</a> docker ps 的参数：</h3>
<blockquote>
<p>docker ps -a 可查看后台运行的容器 id，并根据需求删除</p>
<p>docker inspect 容器 id     // 查看容器内部的细节</p>
</blockquote>
<h2 id="镜像原理"><a class="markdownIt-Anchor" href="#镜像原理">#</a> 镜像原理：</h2>
<p>轻量的，可执行的独立软件包，用来打包软件和软件所需的运行环境</p>
<p>docker 镜像实际上是一层层文件系统，这种为 UnionFile 层级文件系统</p>
<p>一个文件的内存大，说明需要的层级文件多，依赖的环境复杂</p>
<h2 id="分层结构"><a class="markdownIt-Anchor" href="#分层结构">#</a> 分层结构：</h2>
<p>优点 ------ 共享资源</p>
<p>镜像层可读，容器层可写</p>
<blockquote>
<p>docker commit     // 提交容器副本成为一个新的镜像</p>
<p>-m “提交信息”    -a 作者    容器 ID  目标镜像名：tag</p>
</blockquote>
<h2 id="防火墙"><a class="markdownIt-Anchor" href="#防火墙">#</a> 防火墙：</h2>
<blockquote>
<p>systemctl status firewalld.service   // 查看防火墙状态</p>
</blockquote>
<blockquote>
<p>systemctl stop firewalld.service   // 关闭运行的防火墙</p>
</blockquote>
<blockquote>
<p>systemctl disable firewalld.service  // 永久关闭防火墙</p>
</blockquote>
<h2 id="docker容器数据卷"><a class="markdownIt-Anchor" href="#docker容器数据卷">#</a> docker 容器数据卷：</h2>
<p>保证数据的持久化，容器之间共享数据，数据同步</p>
<h3 id="直接命令"><a class="markdownIt-Anchor" href="#直接命令">#</a> 直接命令：</h3>
<blockquote>
<p>docker run -it -v /myDataVolume:/dataVolumeContainer centos</p>
</blockquote>
<p>:ro   // 修改权限为只读模式</p>
<p>映射文件夹下无法新建文件，且无法修改文件，形成单方向同步</p>
<h2 id="dockerfile"><a class="markdownIt-Anchor" href="#dockerfile">#</a> DockerFile：</h2>
<p>对镜像源码的描述，编译文件</p>
<p>提示错误：“docker build” requires exactly 1 argument.</p>
<p>原因是因为（少了一个 ‘.’ ， ‘.’ 代表当前路径）</p>
<p>[root@docker mydocker]# docker build -f /mydocker/DockerFile -t cs/centos .</p>
<p>. 打包当前目录</p>
<h3 id="数据卷容器"><a class="markdownIt-Anchor" href="#数据卷容器">#</a> 数据卷容器：</h3>
<p>容器间传递共享</p>
<p>docker run -it --name dc01 cs/centos  // 父容器</p>
<p>docker run -it --name dc02 --volumes-from dc01 cs/centos   // 子容器</p>
<p>删除父容器 1，对 2，3 子容器不影响，干掉父容器 1，对 2，3 之间的数据共享也不影响</p>
<h3 id="dockerfile-镜像构建文件"><a class="markdownIt-Anchor" href="#dockerfile-镜像构建文件">#</a> DockerFile:  镜像构建文件</h3>
<p>手动编写符合 file 规范的 dockerfile 文件</p>
<p>docker build 命令执行，生成镜像</p>
<p>docker run 执行</p>
<h3 id="dockerfile-2"><a class="markdownIt-Anchor" href="#dockerfile-2">#</a> dockerfile：</h3>
<p>1，每条保留字指令都必须大写首字母，且保留字后不为空</p>
<p>2，指令自上而下，顺序执行，# 表注释</p>
<p>3，每条指令创建一个新的镜像层，并不断提交给镜像</p>
<h3 id="docker执行dockerfile的大致流程"><a class="markdownIt-Anchor" href="#docker执行dockerfile的大致流程">#</a> docker 执行 dockerfile 的大致流程：</h3>
<p>1，docker 从基础镜像运行一个容器</p>
<p>2，执行一条条指令，对容器进行修改</p>
<p>3，执行 docker commit 提交新的镜像层，对镜像进行修改</p>
<p>4，docker 基于新镜像在运行一个容器</p>
<p>5，在依次类推，直到运行完所有指令</p>
<h3 id="dockerfile保留字"><a class="markdownIt-Anchor" href="#dockerfile保留字">#</a> dockerfile 保留字：</h3>
<p>基础镜像</p>
<p>作者说明</p>
<p>执行命令</p>
<p>指定对外暴露的端口</p>
<p>进入终端的指定工作目录</p>
<p>构建镜像中设置环境变量</p>
<p>拷贝并解压缩某个压缩包</p>
<p>与 add 功能相同，但不能解压缩</p>
<p>自建容器卷</p>
<p>指定容器启动时要运行的命令，只有最后一个 CMD 命令生效</p>
<p>指定容器启动时要运行的命令，但不会覆盖之前的命令</p>
<p>触发器</p>
<h2 id="cmd和entrypoint区别"><a class="markdownIt-Anchor" href="#cmd和entrypoint区别">#</a> CMD 和 ENTRYPOINT 区别：</h2>
<p>CMD  run 命令后加参数覆盖之前的命令</p>
<p>ENTRYPOINT  run 命令后的参数添加到命令里</p>

        </div>

        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/Docker/">#Docker</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2020/09/13/Pandas-DataFrame/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">认识Pandas-DataFrame</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Eric Chen</a>
        </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    

    <div class="image-viewer-container">
    <img src="">
</div>


    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>





    
<script src="/js/code-copy.js"></script>





<div class="post-scripts">
    
</div>



</body>
</html>
