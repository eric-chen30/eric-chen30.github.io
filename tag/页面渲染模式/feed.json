{
    "version": "https://jsonfeed.org/version/1",
    "title": "CsStar • All posts by \"页面渲染模式\" tag",
    "description": "Work Hard To Be A Better Man",
    "home_page_url": "http://csstar.top",
    "items": [
        {
            "id": "http://csstar.top/2022/03/12/%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%BC%8F/",
            "url": "http://csstar.top/2022/03/12/%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%BC%8F/",
            "title": "CSR、SSR、SPA",
            "date_published": "2022-03-12T14:19:37.000Z",
            "content_html": "<h1 id=\"csr-ssr-spa\"><a class=\"markdownIt-Anchor\" href=\"#csr-ssr-spa\">#</a> CSR、SSR、SPA</h1>\n<h2 id=\"csr\"><a class=\"markdownIt-Anchor\" href=\"#csr\">#</a> CSR</h2>\n<blockquote>\n<p>什么是 CSR</p>\n</blockquote>\n<p>页面由 JS 渲染，JS 运行于浏览器端，称为客户端渲染。Vue、React 都是基于这种模式。</p>\n<blockquote>\n<p>优缺点</p>\n</blockquote>\n<ul>\n<li>优点：</li>\n</ul>\n<ol>\n<li>前后端分离的架构，有利于开发效率的提升</li>\n</ol>\n<ul>\n<li>缺点：</li>\n</ul>\n<ol>\n<li>首屏渲染时间较长</li>\n<li>不利于 SEO (搜索引擎优化)</li>\n</ol>\n<blockquote>\n<p>基于 React 的 csr 渲染流程</p>\n</blockquote>\n<p>浏览器下载 HTML 文档 ——&gt; 下载 JS——&gt; 运行 react 代码构建页面 ——&gt; 展示页面</p>\n<h2 id=\"ssr\"><a class=\"markdownIt-Anchor\" href=\"#ssr\">#</a> SSR</h2>\n<blockquote>\n<p>什么是 SSR</p>\n</blockquote>\n<p>把 Vue 组件渲染为服务器的 HTML 字符串，将他们直接发送到浏览器，最后将静态标记 混和 为客户端上完成全交互应用程序。</p>\n<blockquote>\n<p>优缺点</p>\n</blockquote>\n<ul>\n<li>优点：</li>\n</ul>\n<ol>\n<li>SEO    搜索引擎优化</li>\n<li>首屏显示时间</li>\n</ol>\n<ul>\n<li>缺点：</li>\n</ul>\n<ol>\n<li>开发逻辑复杂</li>\n<li>开发条件有所限制，比如一些生命周期、第三方库不能使用</li>\n<li>服务器的负载增大</li>\n</ol>\n<blockquote>\n<p>实例代码</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 导入 express 作为渲染服务器</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> exprss = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;express&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 导入 createRender 用于获取渲染器</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123;createRender&#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;vue-server-render&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 导入 fs 模块</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;fs&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 导入 Vue 用于声明待渲染实例</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Vue = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;vue&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 创建 express 实例</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = express();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> template = fs.readFileSync(path.join(_dirname, <span class=\"string\">&#x27;./public/index.html&#x27;</span>));</span><br><span class=\"line\"><span class=\"comment\">// 获取渲染器</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> render = createRender(&#123;</span><br><span class=\"line\">    template: template.toString()</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.get(<span class=\"string\">&#x27;*&#x27;</span>, <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req,res</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 待渲染的 Vue 实例</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> template = <span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">       template: <span class=\"string\">&#x27;&lt;h1&gt;hello world&lt;/h&gt;&#x27;</span> </span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// renderToString 可以将vue实例转换为HTML字符串</span></span><br><span class=\"line\">    <span class=\"comment\">// 若未传递回调函数，返回一个Promise</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> html = <span class=\"keyword\">await</span> renderer.renderToSting(template,&#123;</span><br><span class=\"line\">        title: <span class=\"string\">&#x27;vue ssr&#x27;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    res.send(html);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 绑定程序监听端口到指定的主机端口号</span></span><br><span class=\"line\">app.listen(<span class=\"number\">3000</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;running&#x27;</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"spa\"><a class=\"markdownIt-Anchor\" href=\"#spa\">#</a> SPA</h2>\n<blockquote>\n<p>单页面模式。Vue、React 的路由都是 SPA 模式</p>\n</blockquote>\n",
            "tags": [
                "页面渲染模式"
            ]
        }
    ]
}